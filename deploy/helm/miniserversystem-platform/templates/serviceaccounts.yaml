{{- /*
Where: deploy/helm/miniserversystem-platform/templates/serviceaccounts.yaml
What: ServiceAccount resources for each app workload.
Why: Istio AuthorizationPolicy identifies callers by SPIFFE principal derived from ServiceAccount.
*/ -}}
{{- range $name, $svc := .Values.app }}
{{- if $svc.enabled }}
apiVersion: v1
kind: ServiceAccount
metadata:
  name: {{ default $name $svc.serviceAccountName }}
---
{{- end }}
{{- end }}
